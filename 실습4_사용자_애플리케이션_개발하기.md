# 사용자 애플리케이션 개발하기:

### <a name="runlocal"></a>Marbles 구동하기(Run)
Marbles 애플리케이션은 node.js 로 개발되어 있습니다.  
먼저 Marbles 의 dependencies 들을 설치해 보겠습니다.

1. 개발 서버 putty 커맨드 창을 연 후 Marbles 디렉토리로 이동하십시오.
2. 커맨드 창에서 다음을 입력하십시오.type:

		> npm install gulp -g
		> npm install

3. 다음으로, 애플리케이션을 구동하겠습니다. 우리는 IBM Cloud 블록체인 네트워크와 연동하기 때문에 다음 명령어를 수행합니다.

		> gulp marbles_tls

    
4. 만약 잘 수행되었다면 아래와 같은 메시지가 보여야 합니다.

    ![](/doc_images/localhost1.png)
    (콘솔 창에 "NOT launched successfully yet" 라고 출력되어도 괜찮습니다 오키도키).
    만약 local connection profile JSON 파일의 "client" 색션부문에 "client.credentialStore.path" 의 경로를 올바르게 지정하였음에도 불구하고 "Failed to load user "admin" from local key value store. Error: Error: Private key missing from key store. Can not establish the signing identity for user admin" 와 같은 에러가 발생한다면, 버그일 가능성이 높습니다. (https://jira.hyperledger.org/browse/FAB-2593) 이러한 경우, $HOME/.hfc-key-store 디렉토리를 백업하시고 /$HOME/fabric-samples/fabcar/hfc-key-store 에 존재하는 모든 파일을 $HOME/.hfc-key-store 디렉토리로 복사해 두십시오. 복사를 완료하면 다시 gulp marbles_local 을 구동시키기 바랍니다.

1. 콘솔 창에 표시된 url 주소로 브라우저를 통해 로그인합니다. 이미 채워져 있는 `admin` 계정명을 변경할 필요가 없으며 패스워드도 입력할 필요가 없습니다.
    
    ![](/doc_images/localhost2.png)
  
1. 다음으로 세팅을 위한 패널이 팝업으로 떠야 합니다. 초기 세팅을 위한 것인데요, 3 단계로 진행될 것입니다.
	1. 관리자 등록(Enroll Admin) - 이 단계는 자신의 네트워크 CA 와 통신하기 위한 것입니다. 즉, admin 사용자 계정 검증을 위해 사용됩니다.(enrollID/enrollSecret)
		- 만약 실패한다면 블록체인 connection profile 에 있는 enrollID 및 enrollSecret 필드를 확인하십시오.
	1. 체인코드 찾기(Finding Chaincode) - 이 단계는 자신의 peer 에서 Marbles 체인코드를 검색하는 단계입니다. 이 역시 블록체인 connection profile 정보에 있는 체인코드 ID 값을 통해 찾습니다.
	1. Marbles 소유자 등록(Register Marble Owners) - 이 단계는 Marbles configuration JSON 파일에 명시되어 있는 구슬 소유자들을 생성할 것입니다.
		- 1 ~ 2 분까지 소요될 수도 있습니다. 콘솔 로그를 통해 진행 상황을 확인하십시오.
    
    ![](/doc_images/localhost3.png)
   
1. 이 메시지를 확인하게 되면 아주 좋은 상황입니다.
    
    ![](/doc_images/localhost4.png)
  
1. 구슬들이 모두 세티되었습니다! 이제 [다음 실습](../README.md#use) 단계로 이동하겠습니다.

